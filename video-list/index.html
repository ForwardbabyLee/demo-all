<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="css/index.css">
    <script src="../../js-bag/lib.flexible.js"></script>
    <script src="../../js-bag/fastclick.js"></script>
    <script src="../../js-bag/jquery-1.11.2.min.js"></script>
    <!--<script src="http://vjs.zencdn.net/5.0.2/video.js"></script>-->
    <title>视频列表</title>
</head>
<body>
<p class="wifi-tip">以下视频建议在WiFi环境下播放<span></span></p>

<!-- 视频1 -->
<h3 class="video-title">视频介绍一</h3>
<div class="video-items">
    <video id="video0" key="0" class="media" webkit-playsinline playsinline  preload="none" controls="controls" poster="images/video-01.png">
        <source src="http://video.wenjf.com/Act-ss-mp4-ld/01166074c3414d4ab27d5a6089ff9eba/taitong_1.mp4" type="video/mp4">
        您的浏览器不支持此种视频格式。
    </video>
</div>
<p class="video-bottom-grey"></p>

<!-- 视频2 -->
<h3 class="video-title">视频介绍视频介绍视频介绍视频介绍视频介绍视频最多显示两行</h3>
<div class="video-items">
    <video id="video1" key="1" class="media" webkit-playsinline playsinline  preload="none" controls="controls" poster="images/video-01.png">
        <source src="http://video.wenjf.com/Act-ss-mp4-ld/01166074c3414d4ab27d5a6089ff9eba/taitong_1.mp4" type="video/mp4">
        您的浏览器不支持此种视频格式。
    </video>
</div>
<p class="video-bottom-grey"></p>

<!-- 视频3 -->
<h3 class="video-title">视频介绍三</h3>
<div class="video-items">
    <video id="video2" key="2" class="media" webkit-playsinline playsinline  preload="none" controls="controls" poster="images/video-01.png">
        <source src="http://video.wenjf.com/Act-ss-mp4-ld/01166074c3414d4ab27d5a6089ff9eba/taitong_1.mp4" type="video/mp4">
        您的浏览器不支持此种视频格式。
    </video>
</div>
<p class="video-bottom-grey"></p>
<script>
    $(function () {
        FastClick.attach(document.body);
        //wifi提示
        $('.wifi-tip span').on('click', function () {
            $(this).parent().hide();
        });

        //生成img
        $('.video-items').append('<img src="images/loading.gif" class="loading" alt="">');
    });


    window.onload = function () {
        var medias = document.querySelectorAll(".media");
        var mediaLength = medias.length;
        var loading = document.querySelectorAll('.loading');

        for(var i=0; i< mediaLength; i++) {
            document.getElementById("video"+i).onclick = function(){
                var _this = this;
                var k = _this.getAttribute('key');

                for (var j = 0; j < mediaLength; j++) {
                    if (j == k) {
                        continue;
                    }
                    medias[j].pause();
                    loading[j].style.display = 'none';
                }

                if (this.paused) {
                    this.play();
                } else {
                    this.pause();
                }
            }
        }
    }

</script>
</body>
</html>